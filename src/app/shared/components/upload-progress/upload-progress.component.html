@if (uploadService.hasActiveUploads()) {
  <div class="upload-progress-container" 
       [class.expanded]="isExpanded()"
       animate.enter="slide-up">
    
    <!-- Header sempre visibile -->
    <div class="upload-header" (click)="toggleExpand()">
      <div class="header-left">
        <mat-icon class="expand-icon" [class.rotated]="isExpanded()">
          expand_less
        </mat-icon>
        <span class="upload-title">
          {{ uploadService.uploadCount() }} 
          {{ uploadService.uploadCount() === 1 ? 'video in caricamento' : 'video in caricamento' }}
        </span>
      </div>
      
      <div class="header-actions">
        @if (uploadService.uploadCount() === 0) {
          <button mat-icon-button 
                  (click)="uploadService.clearCompleted(); $event.stopPropagation()"
                  class="clear-btn">
            <mat-icon>clear_all</mat-icon>
          </button>
        }
      </div>
    </div>

    <!-- Lista upload (visibile quando espansa) -->
    @if (isExpanded()) {
      <div class="upload-list" animate.enter="expand-down">
        @for (upload of uploadingUploads(); track upload.id) {
          <div class="upload-item" 
               animate.enter="slide-fade-in"
               animate.leave="slide-fade-out">
            <div class="upload-info">
              <mat-icon [class]="'status-icon ' + getStatusColor(upload.status)">
                {{ getStatusIcon(upload.status) }}
              </mat-icon>
              
              <div class="upload-details">
                <div class="upload-name">{{ upload.title || upload.fileName }}</div>
                <div class="upload-status">
                  Caricamento: {{ upload.progress }}%
                </div>
              </div>
            </div>

            <!-- Progress bar determinate -->
            <mat-progress-bar 
              mode="determinate"
              [value]="upload.progress"
              color="primary">
            </mat-progress-bar>
          </div>
        }
      </div>
    }
  </div>
}
